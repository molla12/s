<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>এডিটেবল লিংক শর্টনার</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #0f172a; color: white; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; padding: 20px;
        }
        .container { 
            background: #1e293b; padding: 30px; border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            width: 100%; max-width: 450px; text-align: center;
        }
        h2 { color: #38bdf8; margin-bottom: 20px; font-size: 24px; }
        
        .input-group { text-align: left; margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #94a3b8; font-size: 14px; }
        
        input { 
            width: 100%; padding: 12px; border: 1px solid #334155; 
            border-radius: 8px; background: #0f172a; color: white; 
            font-size: 16px; outline: none; transition: 0.3s;
        }
        input:focus { border-color: #38bdf8; }

        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        
        button { 
            flex: 2; padding: 12px; border: none; border-radius: 8px; 
            background: #38bdf8; color: #0f172a; 
            font-weight: bold; font-size: 16px; cursor: pointer; transition: 0.3s;
        }
        button:hover { background: #0ea5e9; }
        
        .reset-btn { 
            flex: 1; background: #ef4444; color: white;
        }
        .reset-btn:hover { background: #dc2626; }

        #resultArea { 
            margin-top: 25px; display: none; padding: 20px; 
            background: #0f172a; border-radius: 10px; border: 1px dashed #38bdf8;
        }
        .short-url { 
            color: #f472b6; font-weight: bold; font-size: 18px; 
            display: block; margin-bottom: 10px; word-break: break-all;
        }
        .copy-btn { 
            background: #10b981; color: white; padding: 8px 15px; font-size: 14px; width: auto;
        }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>
<body>

<div class="container">
    <h2>লিংক শর্টনার</h2>
    
    <div class="input-group">
        <label>আসল লিংক (Long URL):</label>
        <input type="url" id="longUrl" placeholder="https://example.com/very-long-link">
    </div>

    <div class="input-group">
        <label>পছন্দমতো আইডি (Custom ID - ঐচ্ছিক):</label>
        <input type="text" id="customAlias" placeholder="যেমন: mylink123">
    </div>

    <div class="btn-group">
        <button id="shortenBtn" onclick="makeShort()">তৈরি করুন</button>
        <button class="reset-btn" onclick="resetAll()">রিসেট</button>
    </div>

    <div id="resultArea">
        <span>আপনার ছোট লিংক:</span>
        <span id="shortUrl" class="short-url"></span>
        <button class="copy-btn" onclick="copyUrl()">কপি করুন</button>
    </div>
</div>

<script>
    async function makeShort() {
        let longUrl = document.getElementById('longUrl').value.trim();
        let alias = document.getElementById('customAlias').value.trim();
        const btn = document.getElementById('shortenBtn');
        const resultArea = document.getElementById('resultArea');
        const shortUrlSpan = document.getElementById('shortUrl');

        if (!longUrl) { alert("দয়া করে আসল লিংকটি দিন!"); return; }
        if (!longUrl.startsWith('http')) { longUrl = 'https://' + longUrl; }

        btn.disabled = true;
        btn.innerText = "কাজ হচ্ছে...";

        try {
            // CORS Proxy ব্যবহার করে রিকোয়েস্ট পাঠানো
            const proxy = "https://api.allorigins.win/get?url=";
            let apiUrl = `https://is.gd/create.php?format=json&url=${encodeURIComponent(longUrl)}`;
            
            // যদি ইউজার নিজের আইডি দেয়
            if (alias) {
                apiUrl += `&shorturl=${encodeURIComponent(alias)}`;
            }

            const response = await fetch(proxy + encodeURIComponent(apiUrl));
            const data = await response.json();
            const result = JSON.parse(data.contents);

            if (result.shorturl) {
                shortUrlSpan.innerText = result.shorturl;
                resultArea.style.display = "block";
            } else if (result.errormessage) {
                alert("ভুল: " + result.errormessage);
            }
        } catch (error) {
            alert("সার্ভার কানেকশন সমস্যা! আবার চেষ্টা করুন।");
        } finally {
            btn.disabled = false;
            btn.innerText = "তৈরি করুন";
        }
    }

    function resetAll() {
        document.getElementById('longUrl').value = "";
        document.getElementById('customAlias').value = "";
        document.getElementById('resultArea').style.display = "none";
        document.getElementById('shortenBtn').disabled = false;
        document.getElementById('shortenBtn').innerText = "তৈরি করুন";
    }

    function copyUrl() {
        const text = document.getElementById('shortUrl').innerText;
        navigator.clipboard.writeText(text).then(() => {
            alert("লিংকটি কপি হয়েছে!");
        });
    }
</script>

</body>
</html>
